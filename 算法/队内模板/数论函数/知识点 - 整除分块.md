# çŸ¥è¯†ç‚¹ - æ•´é™¤åˆ†å—

## 1.çº¦æ•°ä¸ªæ•°

ä»¤$\tau(n)$ä¸ºnçš„çº¦æ•°ä¸ªæ•°ï¼Œæ±‚å…¶å‰ç¼€å’Œã€‚

### è§£æž

è‹¥nçš„è´¨å› æ•°åˆ†è§£ä¸º$n=p_1^{e_1} \cdot p_2^{e_2} \cdots p_k^{e_k}$ï¼Œåˆ™
$$
\tau(n) = (e_1 + 1) \cdot (e_2 + 1) \cdots (e_k + 1)
$$
ä¸è¿‡æ±‚è¿™ä¸ªå‰ç¼€å’Œæ—¶ä¸éœ€è¦æ­¤å…¬å¼ã€‚

æˆ‘ä»¬æœ‰
$$
\sum_{i=1}^{n}\tau(i)=\sum_{i=1}^{n}{\sum_{j=1}^{n}{[j|i]}}=\sum_{i=1}^{n}\lfloor\frac {n}{i}\rfloor
$$
å¯¹äºŽ
$$
y_1=\lfloor\frac{n}{x}\rfloor\\
y_2=\frac{n}{x}
$$
$n=12$æ—¶ä½œå›¾å¦‚ä¸‹ï¼š

![1568030452608](C:\Users\acm-14\AppData\Roaming\Typora\typora-user-images\1568030452608.png)

å½“$iâ‰¤\sqrt n$æ—¶ï¼Œ$\lfloor\frac{n}{i}\rfloor$æ˜¾ç„¶åªæœ‰$O(\sqrt n)$ä¸ªå–å€¼ï¼›å½“$i>\sqrt n$æ—¶ï¼Œ$\lfloor\frac{n}{i}\rfloor<\sqrt n$æ˜¾ç„¶ä¹Ÿåªæœ‰$O(\sqrt n)$ä¸ªå–å€¼ï¼›
å¯¹äºŽå›ºå®š$\lfloor\frac{n}{i}\rfloor$,$i$çš„å–å€¼æ˜¯ä¸€æ®µè¿žç»­çš„åŒºé—´ï¼Œè¿™æ®µåŒºé—´æ˜¯$[\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor+1}\right\rfloor+1,\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor}\right\rfloor]$

å‡ ä½•ä¸Šå¯ä»¥ç†è§£ä¸ºå…ˆæ‰¾åˆ°å¯¹åº”çš„çº¢çº¿ï¼Œå³æ±‚å‡ºiç‚¹çš„å€¼$v=\lfloor\frac{n}{i}\rfloor$ï¼›ç„¶åŽæ±‚å‡ºçº¢çº¿çš„ç»ˆç‚¹,å³å³åŒºé—´$r=\lfloor\frac{n}{v}\rfloor$,ä»¥åŠå®ƒçš„èµ·ç‚¹$l=\lfloor\frac{n}{v+1}\rfloor$

å°†$\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor}\right\rfloor$ä½œä¸ºåˆ†ç•Œçº¿ï¼Œæ‰€ä»¥æœ‰å¦‚ä¸‹ä»£ç ï¼š

```cpp
	int ans = 0;
	for (int l = 1, r; l <= n; l = r + 1){
		r = n / (n / l);
		ans += (r - l + 1)*(n / l);
	}
```

å³åŒºé—´çš„ä»£æ•°[è¯æ˜Ž](https://www.cnblogs.com/0xfffe/p/9648943.html)ï¼ŒðŸ‘ˆæˆ³è¿™é‡Œã€‚



## 2.çº¦æ•°å’Œ

ä»¤$\sigma(i)$ä¸ºnçš„çº¦æ•°å’Œï¼Œæ±‚å‰ç¼€å’Œã€‚

oeis A024916

[çº¦æ•°å’Œ](https://www.luogu.org/problem/P2424)

### è§£æž

ç±»ä¼¼ä¸Šé¢ï¼Œæœ‰ï¼š
$$
\sigma(n) = \frac{p_1^{e_1 + 1} - 1}{p_1 - 1} \cdot \frac{p_2^{e_2 + 1} - 1}{p_2 - 1} \cdots \frac{p_k^{e_k + 1} - 1}{p_k - 1}
$$
åŒä¸Šä¹Ÿæ²¡ç”¨ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æŽ¥å†™å‡ºï¼š
$$
\sum_{i=1}^{n}{\sigma(i)}=\sum_{i=1}^{n}{\sum_{j=1}^{n}{[j|i]\cdot j}}=\sum_{i=1}^{n}{i\cdot\sum_{j=1}^{n}{[i|j]}}=\sum_{i=1}^{n}{i\cdot\lfloor\frac{n}{i}\rfloor}=\sum_{i=1}^{n}{\frac{\lfloor\frac{n}{i}\rfloor\cdot (\lfloor\frac{n}{i}\rfloor+1)}{2}}
$$
æœ€åŽçš„ç­‰å¼ç”¨ä¸‹å¼å³è¾¹çš„å½¢å¼ä¼šçˆ†long long
$$
\sum_{i=1}^{n}{i\cdot\lfloor\frac{n}{i}\rfloor}=\sum_{i=1}^{n}{\frac{\lfloor\frac{n}{i}\rfloor\cdot (\lfloor\frac{n}{i}\rfloor+1)}{2}}
$$
å¯ä»¥çœ‹æˆå¯¹æ¯ä¸ª$\lfloor\frac{n}{i}\rfloor$å›ºå®šçš„å—ï¼Œå°† $\lfloor\frac{n}{i}\rfloor$æå‡ºæ¥ï¼Œç„¶åŽå¯¹$i\in[\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor+1}\right\rfloor+1,\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor}\right\rfloor]$ç­‰å·®æ•°åˆ—æ±‚å’Œã€‚
$$
\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor+1}\right\rfloor+1+\left\lfloor\frac{n}{\left\lfloor\frac{n}{i}\right\rfloor}\right\rfloor={ (\lfloor\frac{n}{i}\rfloor+1)}
$$


```cpp
int f(int n) {
	int ans = 0;
	for (int l = 1, r; l <= n; l = r + 1) {
		r = n / (n / l);
		ans += (r - l + 1)*(n / l)*(l+r) / 2;
        //ans += (r - l + 1)*(n / l)*(n/l+1) / 2;
	}
	return ans;
}
signed main()
{
	int l, r;
	while (cin >> l>>r) {
		cout << f(r) - f(l - 1) << endl;
	}
	return 0;
}
```

